Práctica 1: Compartir archivos entre Linux utilizando NFS

1. Instalar NFS y preparar la carpeta compartida (Servidor)

En el servidor NFS

- sudo apt update
- sudo apt install -y nfs-kernel-server

Carpeta a compartir + crear 100 archivos

- sudo mkdir -p /srv/nfs/OS3
- sudo chown -R nobody:nogroup /srv/nfs/OS3
- sudo chmod 0777 /srv/nfs/OS3

Crea Adrian1.txt ... Adrian100.txt (con contenido identificable)

- for i in $(seq 1 100); do echo "Archivo Adrian${i}.txt" | sudo tee /srv/nfs/OS3/Adrian${i}.txt >/dev/null; done

2. Configurar exports

- sudo nano /etc/exports

/srv/nfs/OS3 192.168.100.0/24(rw,sync,no_subtree_check,root_squash)

Aplica los cambios:

- sudo exportfs -ra
- sudo systemctl restart nfs-kernel-server
- sudo exportfs -v

Firewall (opcional si usas UFW):

- sudo ufw allow from 192.168.100.0/24 to any port nfs
- sudo ufw reload

Instalar el cliente NFS y montar (Cliente Linux)

En el cliente

- sudo apt update
- sudo apt install -y nfs-common

Crear punto de montaje

- sudo mkdir -p /mnt/os3

Montar (reemplaza IP del servidor)

- sudo mount -t nfs -o vers=4 192.168.100.164:/srv/nfs/OS3 /mnt/os3

Validar

- ls -l /mnt/os3 | head

Auto-montaje con /etc/fstab y prueba de reinicio

- sudo nano /etc/fstab

Agrega la línea (ajusta IP/red):

- 192.168.100.164:/srv/nfs/OS3 /mnt/os3 nfs defaults,_netdev,vers=4.2,x-systemd.automount 0 0

Prueba sin reiniciar:

- sudo systemctl daemon-reload
- sudo mount -a
- mount | grep /mnt/os3
- ls /mnt/os3 | wc -l  
